; Begin
	R0L EQU 0x20
	R0H EQU 0x21
	R1L EQU 0x22
	R1H EQU 0x23
	R2L EQU 0x24
	R2H EQU 0x25
	R3L EQU 0x26
	R3H EQU 0x27
	R4L EQU 0x28
	R4H EQU 0x29
	R5L EQU 0x2A
	R5H EQU 0x2B
	ORG 0x0000
	BCF PCLATH,3
	BCF PCLATH,4
	GOTO L0002
	ORG 0x0004
	RETFIE
L0002:
; 1: Dim i As Byte 'declare a variable
;       The address of 'i' is 0x2C
	i EQU 0x2C
; 2: Hseropen 9600 'open hardware uart port for baud rate 9600
;       Exact baud rate: 9615
;       Baud rate error: 15 (.156%)
	BSF STATUS,RP0
	MOVLW 0x19
	MOVWF SPBRG
	BSF TRISC,6
	BSF TRISC,7
	MOVLW 0x24
	MOVWF TXSTA
	BCF STATUS,RP0
	MOVLW 0x90
	MOVWF RCSTA
; 3:  'WaitMs 1000 'this delay should be used in a real device
; 4: 
; 5: For i = 10 To 5 Step -1 'for-next loop
	MOVLW 0x0A
	MOVWF 0x2C
L0003:
	MOVLW 0x05
	SUBWF 0x2C,W
	BTFSS STATUS,C
	GOTO L0004
; 6: Hserout "Number: ", #i, CrLf 'send formatted output to serial port
	MOVLW 0x4E
	CALL HS01
	MOVLW 0x75
	CALL HS01
	MOVLW 0x6D
	CALL HS01
	MOVLW 0x62
	CALL HS01
	MOVLW 0x65
	CALL HS01
	MOVLW 0x72
	CALL HS01
	MOVLW 0x3A
	CALL HS01
	MOVLW 0x20
	CALL HS01
	MOVF 0x2C,W
	MOVWF R2L
	CLRF R2H
	CALL HS21
	MOVLW 0x0D
	CALL HS01
	MOVLW 0x0A
	CALL HS01
; 7:  'WaitMs 500 'this delay should be used in a real device
; 8: Next i
	MOVLW 0x01
	SUBWF 0x2C,F
	BTFSC STATUS,C
	GOTO L0003
L0004:	MOVLW 0x1F
	ANDWF STATUS,F
; 9: 
; 10: loop: 
L0001:
; 11: Hserin i 'wait to receive a byte on serial port
	CALL HS10
	MOVWF 0x2C
; 12: Hserout "Number: ", #i, CrLf 'send formatted output to serial port
	MOVLW 0x4E
	CALL HS01
	MOVLW 0x75
	CALL HS01
	MOVLW 0x6D
	CALL HS01
	MOVLW 0x62
	CALL HS01
	MOVLW 0x65
	CALL HS01
	MOVLW 0x72
	CALL HS01
	MOVLW 0x3A
	CALL HS01
	MOVLW 0x20
	CALL HS01
	MOVF 0x2C,W
	MOVWF R2L
	CLRF R2H
	CALL HS21
	MOVLW 0x0D
	CALL HS01
	MOVLW 0x0A
	CALL HS01
; 13: Goto loop 'loop forever
	GOTO L0001
; End of program
L0005:	GOTO L0005
; Division Routine
D001:	MOVLW 0x10
	MOVWF R3L
	CLRF R2H
	CLRF R2L
D002:	RLF R0H,W
	RLF R2L,F
	RLF R2H,F
	MOVF R1L,W
	SUBWF R2L,F
	MOVF R1H,W
	BTFSS STATUS,C
	INCFSZ R1H,W
	SUBWF R2H,F
	BTFSC STATUS,C
	GOTO D003
	MOVF R1L,W
	ADDWF R2L,F
	MOVF R1H,W
	BTFSC STATUS,C
	INCFSZ R1H,W
	ADDWF R2H,F
	BCF STATUS,C
D003:	RLF R0L,F
	RLF R0H,F
	DECFSZ R3L,F
	GOTO D002
	MOVF R0L,W
	RETURN
; Hardware Serial Communication Routines
HS01:	BTFSC PIR1,TXIF
	GOTO HS02
	GOTO HS01
HS02:	MOVWF TXREG
	RETURN
HS10:	BTFSC PIR1,RCIF
	GOTO HS11
	GOTO HS10
HS11:	MOVF RCREG,W
	RETURN
; Hserout Decimal Conversion Routine
HS21:	BSF R3H,7
	MOVLW 0x27
	MOVWF R1H
	MOVLW 0x10
	CALL HS22
	MOVLW 0x03
	MOVWF R1H
	MOVLW 0xE8
	CALL HS22
	CLRF R1H
	MOVLW 0x64
	CALL HS22
	CLRF R1H
	MOVLW 0x0A
	CALL HS22
	MOVF R2L,W
	GOTO HS23
HS22:	MOVWF R1L
	MOVF R2H,W
	MOVWF R0H
	MOVF R2L,W
	MOVWF R0L
	CALL D001
	MOVF R0L,W
	BTFSS STATUS,Z
	BCF R3H,7
	BTFSC R3H,7
	RETURN
HS23:	ADDLW 0x30
	CALL HS01
	RETURN
; End of listing
	END
